
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive resource for Java developers covering core concepts to advanced microservices architecture">
      
      
        <meta name="author" content="Muhammed Shemeel">
      
      
        <link rel="canonical" href="https://mshemeel.github.io/java-learning/spring-boot/spring-boot-testing/">
      
      
        <link rel="prev" href="../spring-boot-security/">
      
      
        <link rel="next" href="../spring-boot-actuator/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Testing - Java Learning Platform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spring-boot-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Java Learning Platform" class="md-header__button md-logo" aria-label="Java Learning Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Java Learning Platform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mshemeel/java-learning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mshemeel/java-learning
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../java/basic-concepts/" class="md-tabs__link">
          
  
    
  
  Java Core

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../spring-boot-core-concepts/" class="md-tabs__link">
          
  
    
  
  Spring Boot

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../microservices/microservices-basics/" class="md-tabs__link">
          
  
    
  
  Microservices

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../kubernetes/kubernetes-basics/" class="md-tabs__link">
          
  
    
  
  Kubernetes

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../design-patterns/design-patterns-principles/" class="md-tabs__link">
          
  
    
  
  Design Patterns

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment-guide/" class="md-tabs__link">
          
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../feedback/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Java Learning Platform" class="md-nav__button md-logo" aria-label="Java Learning Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Java Learning Platform
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mshemeel/java-learning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mshemeel/java-learning
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Java Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Java Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/basic-concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-oop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OOP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-exception-handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exception Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-multithreading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multithreading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-concurrency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concurrency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-streams-lambdas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streams & Lambdas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-memory-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/java-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Spring Boot
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Spring Boot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-core-concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-starter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Starter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-rest-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-data-access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Testing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-fundamentals-in-spring-boot" class="md-nav__link">
    Testing Fundamentals in Spring Boot
  </a>
  
    <nav class="md-nav" aria-label="Testing Fundamentals in Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-test-dependencies" class="md-nav__link">
    Setting Up Test Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-structure-and-configuration" class="md-nav__link">
    Test Structure and Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-boot-test-annotations" class="md-nav__link">
    Spring Boot Test Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-profiles" class="md-nav__link">
    Testing Profiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-lifecycle" class="md-nav__link">
    Testing Lifecycle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-testing-spring-components" class="md-nav__link">
    Unit Testing Spring Components
  </a>
  
    <nav class="md-nav" aria-label="Unit Testing Spring Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-services" class="md-nav__link">
    Testing Services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-utilities-and-helper-classes" class="md-nav__link">
    Testing Utilities and Helper Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-testng-instead-of-junit" class="md-nav__link">
    Using TestNG Instead of JUnit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-testing" class="md-nav__link">
    Integration Testing
  </a>
  
    <nav class="md-nav" aria-label="Integration Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#springboottest" class="md-nav__link">
    @SpringBootTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-testresttemplate" class="md-nav__link">
    Testing with TestRestTemplate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-for-tests" class="md-nav__link">
    Custom Configuration for Tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dirtiescontext" class="md-nav__link">
    Using @DirtiesContext
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-slices" class="md-nav__link">
    Test Slices
  </a>
  
    <nav class="md-nav" aria-label="Test Slices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#webmvctest" class="md-nav__link">
    @WebMvcTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datajpatest" class="md-nav__link">
    @DataJpaTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsontest" class="md-nav__link">
    @JsonTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restclienttest" class="md-nav__link">
    @RestClientTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamongotest" class="md-nav__link">
    @DataMongoTest
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mocking-with-mockito" class="md-nav__link">
    Mocking with Mockito
  </a>
  
    <nav class="md-nav" aria-label="Mocking with Mockito">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-mocking" class="md-nav__link">
    Basic Mocking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stubbing-method-calls" class="md-nav__link">
    Stubbing Method Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-mocking-techniques" class="md-nav__link">
    Advanced Mocking Techniques
  </a>
  
    <nav class="md-nav" aria-label="Advanced Mocking Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argument-matchers" class="md-nav__link">
    Argument Matchers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argument-captor" class="md-nav__link">
    Argument Captor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spy-on-real-objects" class="md-nav__link">
    Spy on Real Objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocking-static-methods-mockito-340" class="md-nav__link">
    Mocking Static Methods (Mockito 3.4.0+)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-security" class="md-nav__link">
    Testing Security
  </a>
  
    <nav class="md-nav" aria-label="Testing Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-security-test-setup" class="md-nav__link">
    Basic Security Test Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-authentication" class="md-nav__link">
    Testing with Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-security-context" class="md-nav__link">
    Custom Security Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-jwt-authentication" class="md-nav__link">
    Testing JWT Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-testing" class="md-nav__link">
    OAuth2 Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-configurations" class="md-nav__link">
    Testing Configurations
  </a>
  
    <nav class="md-nav" aria-label="Testing Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-properties-configuration" class="md-nav__link">
    Testing Properties Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-profile-specific-configuration" class="md-nav__link">
    Testing Profile-Specific Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-configuration-properties-classes" class="md-nav__link">
    Testing Configuration Properties Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-external-configuration" class="md-nav__link">
    Testing with External Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-containers" class="md-nav__link">
    Test Containers
  </a>
  
    <nav class="md-nav" aria-label="Test Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started-with-testcontainers" class="md-nav__link">
    Getting Started with Testcontainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-a-postgresql-container" class="md-nav__link">
    Testing with a PostgreSQL Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-containers-and-container-networks" class="md-nav__link">
    Multiple Containers and Container Networks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-container-classes" class="md-nav__link">
    Custom Container Classes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-and-load-testing" class="md-nav__link">
    Performance and Load Testing
  </a>
  
    <nav class="md-nav" aria-label="Performance and Load Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jmeter-integration" class="md-nav__link">
    JMeter Integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-performance-testing" class="md-nav__link">
    Basic Performance Testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-testing-with-concurrent-requests" class="md-nav__link">
    Load Testing with Concurrent Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatling-for-load-testing" class="md-nav__link">
    Gatling for Load Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-driven-development" class="md-nav__link">
    Test-Driven Development
  </a>
  
    <nav class="md-nav" aria-label="Test-Driven Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-tdd-cycle" class="md-nav__link">
    The TDD Cycle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-tdd-workflow" class="md-nav__link">
    Example TDD Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-tdd" class="md-nav__link">
    Benefits of TDD
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-best-practices" class="md-nav__link">
    Testing Best Practices
  </a>
  
    <nav class="md-nav" aria-label="Testing Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-tests-according-to-aaa-pattern" class="md-nav__link">
    Structure Tests According to AAA Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-meaningful-test-names" class="md-nav__link">
    Use Meaningful Test Names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-test-interdependencies" class="md-nav__link">
    Avoid Test Interdependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-appropriate-assertion-libraries" class="md-nav__link">
    Use Appropriate Assertion Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-edge-cases-and-error-paths" class="md-nav__link">
    Test Edge Cases and Error Paths
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up-after-tests" class="md-nav__link">
    Clean Up After Tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-test-fixtures-and-factories" class="md-nav__link">
    Use Test Fixtures and Factories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-test-tags-for-categorization" class="md-nav__link">
    Use Test Tags for Categorization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintain-test-quality" class="md-nav__link">
    Maintain Test Quality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-integration" class="md-nav__link">
    Continuous Integration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" class="md-nav__link">
    Further Reading
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-actuator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actuator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-aop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AOP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-data-jpa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring Data JPA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-data-mongo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring Data MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-kafka-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-ai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring AI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../spring-boot-best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Microservices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Microservices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Communication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-discovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Discovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-resilience/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resilience
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-api-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/microservices-best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/saga-pattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Saga Pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/cqrs-pattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CQRS Pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../microservices/platform-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Platform Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-config-secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config & Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-scaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scaling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes-best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Design Patterns
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Design Patterns
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Principles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-j2ee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    J2EE Patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-behavioral/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Behavioral Patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-structural/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structural Patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../design-patterns/design-patterns-creational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creational Patterns
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../search-implementation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search Implementation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../feedback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feedback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-fundamentals-in-spring-boot" class="md-nav__link">
    Testing Fundamentals in Spring Boot
  </a>
  
    <nav class="md-nav" aria-label="Testing Fundamentals in Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-test-dependencies" class="md-nav__link">
    Setting Up Test Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-structure-and-configuration" class="md-nav__link">
    Test Structure and Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-boot-test-annotations" class="md-nav__link">
    Spring Boot Test Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-profiles" class="md-nav__link">
    Testing Profiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-lifecycle" class="md-nav__link">
    Testing Lifecycle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-testing-spring-components" class="md-nav__link">
    Unit Testing Spring Components
  </a>
  
    <nav class="md-nav" aria-label="Unit Testing Spring Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-services" class="md-nav__link">
    Testing Services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-utilities-and-helper-classes" class="md-nav__link">
    Testing Utilities and Helper Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-testng-instead-of-junit" class="md-nav__link">
    Using TestNG Instead of JUnit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-testing" class="md-nav__link">
    Integration Testing
  </a>
  
    <nav class="md-nav" aria-label="Integration Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#springboottest" class="md-nav__link">
    @SpringBootTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-testresttemplate" class="md-nav__link">
    Testing with TestRestTemplate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-for-tests" class="md-nav__link">
    Custom Configuration for Tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dirtiescontext" class="md-nav__link">
    Using @DirtiesContext
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-slices" class="md-nav__link">
    Test Slices
  </a>
  
    <nav class="md-nav" aria-label="Test Slices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#webmvctest" class="md-nav__link">
    @WebMvcTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datajpatest" class="md-nav__link">
    @DataJpaTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsontest" class="md-nav__link">
    @JsonTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restclienttest" class="md-nav__link">
    @RestClientTest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datamongotest" class="md-nav__link">
    @DataMongoTest
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mocking-with-mockito" class="md-nav__link">
    Mocking with Mockito
  </a>
  
    <nav class="md-nav" aria-label="Mocking with Mockito">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-mocking" class="md-nav__link">
    Basic Mocking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stubbing-method-calls" class="md-nav__link">
    Stubbing Method Calls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-mocking-techniques" class="md-nav__link">
    Advanced Mocking Techniques
  </a>
  
    <nav class="md-nav" aria-label="Advanced Mocking Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argument-matchers" class="md-nav__link">
    Argument Matchers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argument-captor" class="md-nav__link">
    Argument Captor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spy-on-real-objects" class="md-nav__link">
    Spy on Real Objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocking-static-methods-mockito-340" class="md-nav__link">
    Mocking Static Methods (Mockito 3.4.0+)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-security" class="md-nav__link">
    Testing Security
  </a>
  
    <nav class="md-nav" aria-label="Testing Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-security-test-setup" class="md-nav__link">
    Basic Security Test Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-authentication" class="md-nav__link">
    Testing with Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-security-context" class="md-nav__link">
    Custom Security Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-jwt-authentication" class="md-nav__link">
    Testing JWT Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-testing" class="md-nav__link">
    OAuth2 Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-configurations" class="md-nav__link">
    Testing Configurations
  </a>
  
    <nav class="md-nav" aria-label="Testing Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-properties-configuration" class="md-nav__link">
    Testing Properties Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-profile-specific-configuration" class="md-nav__link">
    Testing Profile-Specific Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-configuration-properties-classes" class="md-nav__link">
    Testing Configuration Properties Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-external-configuration" class="md-nav__link">
    Testing with External Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-containers" class="md-nav__link">
    Test Containers
  </a>
  
    <nav class="md-nav" aria-label="Test Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started-with-testcontainers" class="md-nav__link">
    Getting Started with Testcontainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-with-a-postgresql-container" class="md-nav__link">
    Testing with a PostgreSQL Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-containers-and-container-networks" class="md-nav__link">
    Multiple Containers and Container Networks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-container-classes" class="md-nav__link">
    Custom Container Classes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-and-load-testing" class="md-nav__link">
    Performance and Load Testing
  </a>
  
    <nav class="md-nav" aria-label="Performance and Load Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jmeter-integration" class="md-nav__link">
    JMeter Integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-performance-testing" class="md-nav__link">
    Basic Performance Testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-testing-with-concurrent-requests" class="md-nav__link">
    Load Testing with Concurrent Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatling-for-load-testing" class="md-nav__link">
    Gatling for Load Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-driven-development" class="md-nav__link">
    Test-Driven Development
  </a>
  
    <nav class="md-nav" aria-label="Test-Driven Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-tdd-cycle" class="md-nav__link">
    The TDD Cycle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-tdd-workflow" class="md-nav__link">
    Example TDD Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-tdd" class="md-nav__link">
    Benefits of TDD
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-best-practices" class="md-nav__link">
    Testing Best Practices
  </a>
  
    <nav class="md-nav" aria-label="Testing Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure-tests-according-to-aaa-pattern" class="md-nav__link">
    Structure Tests According to AAA Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-meaningful-test-names" class="md-nav__link">
    Use Meaningful Test Names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-test-interdependencies" class="md-nav__link">
    Avoid Test Interdependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-appropriate-assertion-libraries" class="md-nav__link">
    Use Appropriate Assertion Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-edge-cases-and-error-paths" class="md-nav__link">
    Test Edge Cases and Error Paths
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clean-up-after-tests" class="md-nav__link">
    Clean Up After Tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-test-fixtures-and-factories" class="md-nav__link">
    Use Test Fixtures and Factories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-test-tags-for-categorization" class="md-nav__link">
    Use Test Tags for Categorization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintain-test-quality" class="md-nav__link">
    Maintain Test Quality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-integration" class="md-nav__link">
    Continuous Integration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" class="md-nav__link">
    Further Reading
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="spring-boot-testing">Spring Boot Testing<a class="headerlink" href="#spring-boot-testing" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This guide provides a comprehensive approach to testing Spring Boot applications. It covers unit testing, integration testing, test slices, mocking strategies, and more. By the end of this guide, you'll understand how to implement effective testing strategies for Spring Boot applications, ensuring their reliability and robustness.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Basic knowledge of Java and Spring Boot</li>
<li>Understanding of software testing concepts</li>
<li>Familiarity with dependency injection and inversion of control</li>
<li>Development environment with Spring Boot set up</li>
</ul>
<h2 id="learning-objectives">Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permanent link">&para;</a></h2>
<ul>
<li>Understand the Spring Boot testing framework</li>
<li>Implement unit tests for Spring components</li>
<li>Write integration tests for Spring Boot applications</li>
<li>Use Spring Boot test slices for focused testing</li>
<li>Apply mocking strategies with Mockito</li>
<li>Test web controllers with MockMvc</li>
<li>Implement data access layer tests</li>
<li>Test security configurations</li>
<li>Execute performance and load tests</li>
<li>Apply test-driven development practices</li>
</ul>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#testing-fundamentals-in-spring-boot">Testing Fundamentals in Spring Boot</a></li>
<li><a href="#unit-testing-spring-components">Unit Testing Spring Components</a></li>
<li><a href="#integration-testing">Integration Testing</a></li>
<li><a href="#test-slices">Test Slices</a></li>
<li><a href="#mockmvc-for-web-layer-testing">MockMvc for Web Layer Testing</a></li>
<li><a href="#data-access-layer-testing">Data Access Layer Testing</a></li>
<li><a href="#mocking-with-mockito">Mocking with Mockito</a></li>
<li><a href="#testing-security">Testing Security</a></li>
<li><a href="#testing-configurations">Testing Configurations</a></li>
<li><a href="#test-containers">Test Containers</a></li>
<li><a href="#performance-and-load-testing">Performance and Load Testing</a></li>
<li><a href="#test-driven-development">Test-Driven Development</a></li>
<li><a href="#testing-best-practices">Testing Best Practices</a></li>
</ol>
<h2 id="testing-fundamentals-in-spring-boot">Testing Fundamentals in Spring Boot<a class="headerlink" href="#testing-fundamentals-in-spring-boot" title="Permanent link">&para;</a></h2>
<p>Spring Boot provides extensive support for testing through the spring-boot-starter-test dependency, which includes:</p>
<ul>
<li>JUnit 5: The core testing framework</li>
<li>Spring Test &amp; Spring Boot Test: Utilities and annotations for testing Spring Boot applications</li>
<li>AssertJ: Fluent assertion library</li>
<li>Hamcrest: Matchers for test expressions</li>
<li>Mockito: Mocking framework</li>
<li>JSONassert: JSON assertion library</li>
<li>JsonPath: XPath for JSON</li>
</ul>
<h3 id="setting-up-test-dependencies">Setting Up Test Dependencies<a class="headerlink" href="#setting-up-test-dependencies" title="Permanent link">&para;</a></h3>
<p>To start testing a Spring Boot application, add the following dependency to your build file:</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Maven --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>Or for Gradle:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Gradle</span>
<span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.springframework.boot:spring-boot-starter-test&#39;</span>
</code></pre></div>
<h3 id="test-structure-and-configuration">Test Structure and Configuration<a class="headerlink" href="#test-structure-and-configuration" title="Permanent link">&para;</a></h3>
<p>A typical Spring Boot test class structure includes:</p>
<ul>
<li>Annotations for test configuration</li>
<li>Setup methods for test initialization</li>
<li>Test methods that validate specific functionality</li>
<li>Teardown methods for cleaning up resources</li>
</ul>
<p>Example of a basic test class:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SomeService</span><span class="w"> </span><span class="n">someService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Setup code executed before each test</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Verify application context loads successfully</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">someService</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testServiceOperation</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Test specific functionality</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someService</span><span class="p">.</span><span class="na">performOperation</span><span class="p">(</span><span class="s">&quot;input&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;expected output&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@AfterEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Cleanup code executed after each test</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="spring-boot-test-annotations">Spring Boot Test Annotations<a class="headerlink" href="#spring-boot-test-annotations" title="Permanent link">&para;</a></h3>
<p>Spring Boot provides several annotations to simplify testing:</p>
<ul>
<li><code>@SpringBootTest</code>: Loads the full application context. Use when you need the complete Spring context.</li>
<li><code>@WebMvcTest</code>: Focuses on testing the web layer, including controllers.</li>
<li><code>@DataJpaTest</code>: Focuses on the JPA components.</li>
<li><code>@RestClientTest</code>: Tests REST clients.</li>
<li><code>@JsonTest</code>: Tests JSON serialization/deserialization.</li>
<li><code>@AutoConfigureMockMvc</code>: Configures MockMvc for testing web controllers.</li>
<li><code>@MockBean</code>: Creates and injects a Mockito mock.</li>
<li><code>@SpyBean</code>: Creates and injects a Mockito spy.</li>
</ul>
<h3 id="testing-profiles">Testing Profiles<a class="headerlink" href="#testing-profiles" title="Permanent link">&para;</a></h3>
<p>It's common to use different configuration profiles for testing:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># application-test.properties</span>
<span class="na">spring.datasource.url</span><span class="o">=</span><span class="s">jdbc:h2:mem:testdb</span>
<span class="na">spring.jpa.hibernate.ddl-auto</span><span class="o">=</span><span class="s">create-drop</span>
</code></pre></div>
<p>Activate the profile in your test:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ActiveProfiles</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ApplicationTests</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Test methods</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-lifecycle">Testing Lifecycle<a class="headerlink" href="#testing-lifecycle" title="Permanent link">&para;</a></h3>
<p>JUnit 5 provides annotations for controlling the test lifecycle:</p>
<ul>
<li><code>@BeforeAll</code>: Executed once, before all test methods.</li>
<li><code>@AfterAll</code>: Executed once, after all test methods.</li>
<li><code>@BeforeEach</code>: Executed before each test method.</li>
<li><code>@AfterEach</code>: Executed after each test method.</li>
<li><code>@Test</code>: Marks a method as a test case.</li>
<li><code>@Disabled</code>: Temporarily disables a test.</li>
<li><code>@DisplayName</code>: Provides a custom name for the test.</li>
<li><code>@Tag</code>: Tags tests for selective execution.</li>
<li><code>@Timeout</code>: Fails the test if it exceeds the given timeout.</li>
<li><code>@RepeatedTest</code>: Repeats a test a specified number of times.</li>
<li><code>@ParameterizedTest</code>: Runs a test multiple times with different arguments.</li>
</ul>
<h2 id="unit-testing-spring-components">Unit Testing Spring Components<a class="headerlink" href="#unit-testing-spring-components" title="Permanent link">&para;</a></h2>
<p>Unit tests focus on testing individual components in isolation. In Spring Boot, this often means testing a service or component without loading the entire Spring context.</p>
<h3 id="testing-services">Testing Services<a class="headerlink" href="#testing-services" title="Permanent link">&para;</a></h3>
<p>A service is typically tested by mocking its dependencies:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.assertThat</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.mockito.Mockito.when</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.BeforeEach</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.extension.ExtendWith</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.InjectMocks</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.Mock</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.junit.jupiter.MockitoExtension</span><span class="p">;</span>

<span class="nd">@ExtendWith</span><span class="p">(</span><span class="n">MockitoExtension</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserServiceTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Mock</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@InjectMocks</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">testUser</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">testUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">testUser</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">testUser</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">testUser</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;test@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByIdShouldReturnUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Arrange</span>
<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">testUser</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// Act</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Assert</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByIdShouldReturnEmptyWhenUserNotFound</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Arrange</span>
<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">999L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">empty</span><span class="p">());</span>

<span class="w">        </span><span class="c1">// Act</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">999L</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Assert</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">).</span><span class="na">isEmpty</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-utilities-and-helper-classes">Testing Utilities and Helper Classes<a class="headerlink" href="#testing-utilities-and-helper-classes" title="Permanent link">&para;</a></h3>
<p>For utility classes and helpers, pure unit tests are appropriate:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.assertThat</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions.assertThrows</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.params.ParameterizedTest</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.params.provider.CsvSource</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">StringUtilsTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">nullOrEmptyShouldReturnTrueForNullString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isNullOrEmpty</span><span class="p">(</span><span class="kc">null</span><span class="p">)).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">nullOrEmptyShouldReturnTrueForEmptyString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isNullOrEmpty</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">nullOrEmptyShouldReturnFalseForNonEmptyString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isNullOrEmpty</span><span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">)).</span><span class="na">isFalse</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@ParameterizedTest</span>
<span class="w">    </span><span class="nd">@CsvSource</span><span class="p">({</span>
<span class="w">        </span><span class="s">&quot;test, TEST&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;Spring, SPRING&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;java, JAVA&quot;</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">toUpperCaseShouldConvertStringToUpperCase</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">(</span><span class="n">input</span><span class="p">)).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">expected</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">toUpperCaseShouldThrowExceptionForNullInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThrows</span><span class="p">(</span><span class="n">NullPointerException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">StringUtils</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="using-testng-instead-of-junit">Using TestNG Instead of JUnit<a class="headerlink" href="#using-testng-instead-of-junit" title="Permanent link">&para;</a></h3>
<p>If you prefer TestNG over JUnit, configure it in your build:</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Maven --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="w">    </span><span class="nt">&lt;exclusions&gt;</span>
<span class="w">        </span><span class="nt">&lt;exclusion&gt;</span>
<span class="w">            </span><span class="nt">&lt;groupId&gt;</span>org.junit.jupiter<span class="nt">&lt;/groupId&gt;</span>
<span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;/exclusion&gt;</span>
<span class="w">    </span><span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.testng<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>testng<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>7.7.1<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>TestNG test example:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import static</span><span class="w"> </span><span class="nn">org.assertj.core.api.Assertions.assertThat</span><span class="p">;</span>
<span class="kn">import static</span><span class="w"> </span><span class="nn">org.mockito.Mockito.when</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.InjectMocks</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.Mock</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.mockito.MockitoAnnotations</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testng.annotations.BeforeMethod</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.testng.annotations.Test</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceTestNG</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Mock</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@InjectMocks</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">testUser</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeMethod</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">MockitoAnnotations</span><span class="p">.</span><span class="na">openMocks</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">        </span><span class="n">testUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">testUser</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">testUser</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByIdShouldReturnUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">testUser</span><span class="p">));</span>

<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="integration-testing">Integration Testing<a class="headerlink" href="#integration-testing" title="Permanent link">&para;</a></h2>
<p>Integration tests verify that different components work together correctly. In Spring Boot, this typically involves loading a subset of the application context.</p>
<h3 id="springboottest">@SpringBootTest<a class="headerlink" href="#springboottest" title="Permanent link">&para;</a></h3>
<p>The <code>@SpringBootTest</code> annotation creates the application context used in tests:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">IntegrationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUserShouldStoreInDatabase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Create a new user</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;integrationtest&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;integration@example.com&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Save using the service</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">savedUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Verify it&#39;s in the database</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">savedUser</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundUser</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;integrationtest&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>For web applications, you can specify if a real or mock web environment should be used:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">WebIntegrationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TestRestTemplate</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUserShouldReturnUserDetails</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">.</span><span class="na">getForEntity</span><span class="p">(</span><span class="s">&quot;/api/users/1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getStatusCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">OK</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">().</span><span class="na">getId</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-with-testresttemplate">Testing with TestRestTemplate<a class="headerlink" href="#testing-with-testresttemplate" title="Permanent link">&para;</a></h3>
<p><code>TestRestTemplate</code> is ideal for integration tests that need to make HTTP requests:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserControllerIntegrationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TestRestTemplate</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;test@example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getAllUsersShouldReturnUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">[]&gt;</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">.</span><span class="na">getForEntity</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getStatusCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">OK</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">()).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">()</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">createUserShouldReturnNewUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">newUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">newUser</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">newUser</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;new@example.com&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">.</span><span class="na">postForEntity</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">newUser</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getStatusCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">CREATED</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">().</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getBody</span><span class="p">().</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="custom-configuration-for-tests">Custom Configuration for Tests<a class="headerlink" href="#custom-configuration-for-tests" title="Permanent link">&para;</a></h3>
<p>You can customize the configuration for tests using <code>@TestConfiguration</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">CustomConfigIntegrationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@TestConfiguration</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Bean</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">SomeService</span><span class="w"> </span><span class="nf">someServiceMock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Mockito</span><span class="p">.</span><span class="na">mock</span><span class="p">(</span><span class="n">SomeService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SomeService</span><span class="w"> </span><span class="n">someService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testWithCustomConfiguration</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// The someService is the mock from TestConfig</span>
<span class="w">        </span><span class="n">Mockito</span><span class="p">.</span><span class="na">when</span><span class="p">(</span><span class="n">someService</span><span class="p">.</span><span class="na">performOperation</span><span class="p">(</span><span class="n">any</span><span class="p">())).</span><span class="na">thenReturn</span><span class="p">(</span><span class="s">&quot;mocked result&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someService</span><span class="p">.</span><span class="na">performOperation</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;mocked result&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="using-dirtiescontext">Using @DirtiesContext<a class="headerlink" href="#using-dirtiescontext" title="Permanent link">&para;</a></h3>
<p>When a test modifies the application context, mark it with <code>@DirtiesContext</code> to reset the context for subsequent tests:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ContextModifyingTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@DirtiesContext</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testThatModifiesContext</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Test that changes the application context</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">subsequentTest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This test will get a fresh application context</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="test-slices">Test Slices<a class="headerlink" href="#test-slices" title="Permanent link">&para;</a></h2>
<p>Spring Boot provides test slice annotations that load only a portion of the application context, making tests faster and more focused.</p>
<h3 id="webmvctest">@WebMvcTest<a class="headerlink" href="#webmvctest" title="Permanent link">&para;</a></h3>
<p>For testing Spring MVC controllers without starting the full application:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@WebMvcTest</span><span class="p">(</span><span class="n">UserController</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserControllerTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@MockBean</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUserByIdShouldReturnUser</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">user</span><span class="p">));</span>

<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/users/1&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">())</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.id&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">(</span><span class="s">&quot;$.username&quot;</span><span class="p">).</span><span class="na">value</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUserByIdShouldReturn404WhenNotFound</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">userService</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">999L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">empty</span><span class="p">());</span>

<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/users/999&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isNotFound</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="datajpatest">@DataJpaTest<a class="headerlink" href="#datajpatest" title="Permanent link">&para;</a></h3>
<p>For testing JPA repositories:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@DataJpaTest</span>
<span class="kd">class</span> <span class="nc">UserRepositoryTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TestEntityManager</span><span class="w"> </span><span class="n">entityManager</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByUsernameShouldReturnUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Create and persist a test user</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;jpatest&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;jpa@example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">entityManager</span><span class="p">.</span><span class="na">persist</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="w">        </span><span class="n">entityManager</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// Test the query method</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;jpatest&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;jpa@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByUsernameShouldReturnNullWhenUsernameNotFound</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;nonexistent&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isNull</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="jsontest">@JsonTest<a class="headerlink" href="#jsontest" title="Permanent link">&para;</a></h3>
<p>For testing JSON serialization and deserialization:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@JsonTest</span>
<span class="kd">class</span> <span class="nc">UserJsonTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JacksonTester</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">json</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">serializeUserToJson</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;jsontest&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;json@example.com&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">JsonContent</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">jsonContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">jsonContent</span><span class="p">).</span><span class="na">extractingJsonPathNumberValue</span><span class="p">(</span><span class="s">&quot;$.id&quot;</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">jsonContent</span><span class="p">).</span><span class="na">extractingJsonPathStringValue</span><span class="p">(</span><span class="s">&quot;$.username&quot;</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;jsontest&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">jsonContent</span><span class="p">).</span><span class="na">extractingJsonPathStringValue</span><span class="p">(</span><span class="s">&quot;$.email&quot;</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;json@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deserializeUserFromJson</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">jsonContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;{\&quot;id\&quot;:1,\&quot;username\&quot;:\&quot;jsontest\&quot;,\&quot;email\&quot;:\&quot;json@example.com\&quot;}&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">jsonContent</span><span class="p">).</span><span class="na">getObject</span><span class="p">();</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;jsontest&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;json@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="restclienttest">@RestClientTest<a class="headerlink" href="#restclienttest" title="Permanent link">&para;</a></h3>
<p>For testing REST clients:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RestClientTest</span><span class="p">(</span><span class="n">RemoteUserService</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">RemoteUserServiceTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RemoteUserService</span><span class="w"> </span><span class="n">remoteUserService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockRestServiceServer</span><span class="w"> </span><span class="n">server</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">objectMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getRemoteUserShouldReturnUser</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;remoteuser&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">server</span><span class="p">.</span><span class="na">expect</span><span class="p">(</span><span class="n">requestTo</span><span class="p">(</span><span class="s">&quot;/api/remote/users/1&quot;</span><span class="p">))</span>
<span class="w">              </span><span class="p">.</span><span class="na">andRespond</span><span class="p">(</span><span class="n">withSuccess</span><span class="p">(</span><span class="n">objectMapper</span><span class="p">.</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="n">user</span><span class="p">),</span><span class="w"> </span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_JSON</span><span class="p">));</span>

<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remoteUserService</span><span class="p">.</span><span class="na">getUser</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;remoteuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getRemoteUserShouldHandleError</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">server</span><span class="p">.</span><span class="na">expect</span><span class="p">(</span><span class="n">requestTo</span><span class="p">(</span><span class="s">&quot;/api/remote/users/999&quot;</span><span class="p">))</span>
<span class="w">              </span><span class="p">.</span><span class="na">andRespond</span><span class="p">(</span><span class="n">withStatus</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">));</span>

<span class="w">        </span><span class="n">assertThatExceptionOfType</span><span class="p">(</span><span class="n">UserNotFoundException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">isThrownBy</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">remoteUserService</span><span class="p">.</span><span class="na">getUser</span><span class="p">(</span><span class="mi">999L</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="datamongotest">@DataMongoTest<a class="headerlink" href="#datamongotest" title="Permanent link">&para;</a></h3>
<p>For testing MongoDB repositories:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@DataMongoTest</span>
<span class="kd">class</span> <span class="nc">ProductRepositoryTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ProductRepository</span><span class="w"> </span><span class="n">productRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">productRepository</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">saveShouldPersistProduct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Product</span><span class="p">();</span>
<span class="w">        </span><span class="n">product</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;Test Product&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">product</span><span class="p">.</span><span class="na">setPrice</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">19.99</span><span class="p">));</span>

<span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">savedProduct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">savedProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>

<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundProduct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">savedProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundProduct</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundProduct</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;Test Product&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">findByNameShouldReturnProducts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Create and save two products</span>
<span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">product1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Product</span><span class="p">();</span>
<span class="w">        </span><span class="n">product1</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;Search Product&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">product1</span><span class="p">.</span><span class="na">setPrice</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">29.99</span><span class="p">));</span>
<span class="w">        </span><span class="n">productRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">product1</span><span class="p">);</span>

<span class="w">        </span><span class="n">Product</span><span class="w"> </span><span class="n">product2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Product</span><span class="p">();</span>
<span class="w">        </span><span class="n">product2</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;Another Product&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">product2</span><span class="p">.</span><span class="na">setPrice</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">39.99</span><span class="p">));</span>
<span class="w">        </span><span class="n">productRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">product2</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Test the query</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foundProducts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">productRepository</span><span class="p">.</span><span class="na">findByNameContaining</span><span class="p">(</span><span class="s">&quot;Search&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundProducts</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">foundProducts</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">getName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;Search Product&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<h2 id="mocking-with-mockito">Mocking with Mockito<a class="headerlink" href="#mocking-with-mockito" title="Permanent link">&para;</a></h2>
<p>Mockito is a popular mocking framework bundled with Spring Boot's testing starter. It allows you to create mock objects, specify their behavior, and verify their interactions.</p>
<h3 id="basic-mocking">Basic Mocking<a class="headerlink" href="#basic-mocking" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@ExtendWith</span><span class="p">(</span><span class="n">MockitoExtension</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">NotificationServiceTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Mock</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EmailSender</span><span class="w"> </span><span class="n">emailSender</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Mock</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SMSGateway</span><span class="w"> </span><span class="n">smsGateway</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@InjectMocks</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">NotificationServiceImpl</span><span class="w"> </span><span class="n">notificationService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">notifyUserShouldSendEmailAndSMS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Arrange</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="s">&quot;user@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1234567890&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Test notification&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// No need to define behavior for void methods like these</span>
<span class="w">        </span><span class="c1">// unless you want them to throw exceptions</span>

<span class="w">        </span><span class="c1">// Act</span>
<span class="w">        </span><span class="n">notificationService</span><span class="p">.</span><span class="na">notifyUser</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Assert - verify the mock interactions</span>
<span class="w">        </span><span class="n">verify</span><span class="p">(</span><span class="n">emailSender</span><span class="p">).</span><span class="na">sendEmail</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getEmail</span><span class="p">(),</span><span class="w"> </span><span class="n">message</span><span class="p">);</span>
<span class="w">        </span><span class="n">verify</span><span class="p">(</span><span class="n">smsGateway</span><span class="p">).</span><span class="na">sendSMS</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getPhoneNumber</span><span class="p">(),</span><span class="w"> </span><span class="n">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="stubbing-method-calls">Stubbing Method Calls<a class="headerlink" href="#stubbing-method-calls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">getUserFullNameShouldCombineFirstAndLastName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mock</span><span class="p">(</span><span class="n">UserRepository</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">    </span><span class="n">user</span><span class="p">.</span><span class="na">setFirstName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">user</span><span class="p">.</span><span class="na">setLastName</span><span class="p">(</span><span class="s">&quot;Doe&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">1L</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">user</span><span class="p">));</span>

<span class="w">    </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="p">(</span><span class="n">userRepository</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">fullName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">getUserFullName</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">fullName</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;John Doe&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="advanced-mocking-techniques">Advanced Mocking Techniques<a class="headerlink" href="#advanced-mocking-techniques" title="Permanent link">&para;</a></h3>
<h4 id="argument-matchers">Argument Matchers<a class="headerlink" href="#argument-matchers" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Using any() to match any argument</span>
<span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="n">any</span><span class="p">())).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="c1">// Using specific argument matchers</span>
<span class="n">when</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsernameAndActive</span><span class="p">(</span><span class="n">eq</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">anyBoolean</span><span class="p">())).</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</code></pre></div>
<h4 id="argument-captor">Argument Captor<a class="headerlink" href="#argument-captor" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">processOrderShouldSendConfirmationEmail</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">ArgumentCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emailCaptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ArgumentCaptor</span><span class="p">.</span><span class="na">forClass</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="n">ArgumentCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subjectCaptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ArgumentCaptor</span><span class="p">.</span><span class="na">forClass</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">();</span>
<span class="w">    </span><span class="n">order</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="s">&quot;ORD-12345&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">order</span><span class="p">.</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="s">&quot;customer@example.com&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">orderService</span><span class="p">.</span><span class="na">processOrder</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Assert - Capture and verify the arguments</span>
<span class="w">    </span><span class="n">verify</span><span class="p">(</span><span class="n">emailService</span><span class="p">).</span><span class="na">sendEmail</span><span class="p">(</span><span class="n">emailCaptor</span><span class="p">.</span><span class="na">capture</span><span class="p">(),</span><span class="w"> </span><span class="n">subjectCaptor</span><span class="p">.</span><span class="na">capture</span><span class="p">(),</span><span class="w"> </span><span class="n">any</span><span class="p">());</span>

<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">emailCaptor</span><span class="p">.</span><span class="na">getValue</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;customer@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">subjectCaptor</span><span class="p">.</span><span class="na">getValue</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;ORD-12345&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="spy-on-real-objects">Spy on Real Objects<a class="headerlink" href="#spy-on-real-objects" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">calculateTotalWithSpy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Create a spy on a real object</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">spyList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spy</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Use the spy</span>
<span class="w">    </span><span class="n">spyList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;one&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">spyList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;two&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Real method calls work normally</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">spyList</span><span class="p">.</span><span class="na">size</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// But we can also stub specific methods</span>
<span class="w">    </span><span class="n">when</span><span class="p">(</span><span class="n">spyList</span><span class="p">.</span><span class="na">size</span><span class="p">()).</span><span class="na">thenReturn</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">spyList</span><span class="p">.</span><span class="na">size</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Other methods still work with real behavior</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">spyList</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;one&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="mocking-static-methods-mockito-340">Mocking Static Methods (Mockito 3.4.0+)<a class="headerlink" href="#mocking-static-methods-mockito-340" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">testStaticMethod</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">MockedStatic</span><span class="o">&lt;</span><span class="n">UtilityClass</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mockedStatic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mockStatic</span><span class="p">(</span><span class="n">UtilityClass</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Stub the static method</span>
<span class="w">        </span><span class="n">mockedStatic</span><span class="p">.</span><span class="na">when</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">UtilityClass</span><span class="p">.</span><span class="na">getCurrentDate</span><span class="p">())</span>
<span class="w">                   </span><span class="p">.</span><span class="na">thenReturn</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// Test code that uses the static method</span>
<span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myService</span><span class="p">.</span><span class="na">processWithDate</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// Assert</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="testing-security">Testing Security<a class="headerlink" href="#testing-security" title="Permanent link">&para;</a></h2>
<p>Spring Security is a critical component in most applications. Testing security configurations and behavior ensures your application remains protected.</p>
<h3 id="basic-security-test-setup">Basic Security Test Setup<a class="headerlink" href="#basic-security-test-setup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">class</span> <span class="nc">SecurityConfigTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">publicEndpointShouldBeAccessible</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/public&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">privateEndpointShouldRequireAuthentication</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/private&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isUnauthorized</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-with-authentication">Testing with Authentication<a class="headerlink" href="#testing-with-authentication" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">class</span> <span class="nc">AuthenticatedEndpointsTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@WithMockUser</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;USER&quot;</span><span class="p">})</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">userCanAccessUserEndpoint</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/user&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@WithMockUser</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;USER&quot;</span><span class="p">})</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">userCannotAccessAdminEndpoint</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/admin&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isForbidden</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@WithMockUser</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ADMIN&quot;</span><span class="p">})</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">adminCanAccessAdminEndpoint</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/admin&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="custom-security-context">Custom Security Context<a class="headerlink" href="#custom-security-context" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">customSecurityContext</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">GrantedAuthority</span><span class="o">&gt;</span><span class="w"> </span><span class="n">authorities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">SimpleGrantedAuthority</span><span class="p">(</span><span class="s">&quot;ROLE_CUSTOM&quot;</span><span class="p">));</span>

<span class="w">    </span><span class="n">SecurityContext</span><span class="w"> </span><span class="n">securityContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">createEmptyContext</span><span class="p">();</span>
<span class="w">    </span><span class="n">securityContext</span><span class="p">.</span><span class="na">setAuthentication</span><span class="p">(</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">UsernamePasswordAuthenticationToken</span><span class="p">(</span><span class="s">&quot;customUser&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">authorities</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">setContext</span><span class="p">(</span><span class="n">securityContext</span><span class="p">);</span>

<span class="w">    </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/custom&quot;</span><span class="p">).</span><span class="na">with</span><span class="p">(</span><span class="n">SecurityMockMvcRequestPostProcessors</span><span class="p">.</span><span class="na">csrf</span><span class="p">()))</span>
<span class="w">           </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// Always clean up after test</span>
<span class="w">    </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">clearContext</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-jwt-authentication">Testing JWT Authentication<a class="headerlink" href="#testing-jwt-authentication" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">class</span> <span class="nc">JwtAuthenticationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JwtTokenProvider</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">endpointShouldBeAccessibleWithValidJwt</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jwtTokenProvider</span><span class="p">.</span><span class="na">createToken</span><span class="p">(</span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;ROLE_USER&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/secured&quot;</span><span class="p">)</span>
<span class="w">               </span><span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bearer &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">token</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">endpointShouldRejectInvalidJwt</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/secured&quot;</span><span class="p">)</span>
<span class="w">               </span><span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bearer invalidToken&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isUnauthorized</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="oauth2-testing">OAuth2 Testing<a class="headerlink" href="#oauth2-testing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@AutoConfigureMockMvc</span>
<span class="kd">class</span> <span class="nc">OAuth2Tests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mockMvc</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="nd">@WithMockUser</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;oauth_user&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">oauthEndpointWithMockUser</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/oauth&quot;</span><span class="p">))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">oauthEndpointWithOAuth2Login</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/oauth&quot;</span><span class="p">)</span>
<span class="w">               </span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">SecurityMockMvcRequestPostProcessors</span><span class="p">.</span><span class="na">oauth2Login</span><span class="p">()))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">oauthEndpointWithCustomOAuth2Login</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mockMvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/oauth&quot;</span><span class="p">)</span>
<span class="w">               </span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">SecurityMockMvcRequestPostProcessors</span><span class="p">.</span><span class="na">oauth2Login</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">attributes</span><span class="p">(</span><span class="n">attrs</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">attrs</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;sub&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1234567890&quot;</span><span class="p">);</span>
<span class="w">                        </span><span class="n">attrs</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Test User&quot;</span><span class="p">);</span>
<span class="w">                        </span><span class="n">attrs</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;testuser@example.com&quot;</span><span class="p">);</span>
<span class="w">                    </span><span class="p">})))</span>
<span class="w">               </span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">status</span><span class="p">().</span><span class="na">isOk</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="testing-configurations">Testing Configurations<a class="headerlink" href="#testing-configurations" title="Permanent link">&para;</a></h2>
<p>Testing application configurations ensures that your application behaves correctly with different property settings.</p>
<h3 id="testing-properties-configuration">Testing Properties Configuration<a class="headerlink" href="#testing-properties-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;app.feature.enabled=true&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;app.max-items=10&quot;</span><span class="p">})</span>
<span class="kd">class</span> <span class="nc">ConfigurationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">appProperties</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">propertiesShouldBeLoaded</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">appProperties</span><span class="p">.</span><span class="na">getFeature</span><span class="p">().</span><span class="na">isEnabled</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">appProperties</span><span class="p">.</span><span class="na">getMaxItems</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-profile-specific-configuration">Testing Profile-Specific Configuration<a class="headerlink" href="#testing-profile-specific-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ActiveProfiles</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ProfileConfigTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testProfileShouldBeActive</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">environment</span><span class="p">.</span><span class="na">getActiveProfiles</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">databaseShouldBeH2InTestProfile</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getConnection</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">dbProduct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conn</span><span class="p">.</span><span class="na">getMetaData</span><span class="p">().</span><span class="na">getDatabaseProductName</span><span class="p">();</span>
<span class="w">            </span><span class="n">assertThat</span><span class="p">(</span><span class="n">dbProduct</span><span class="p">.</span><span class="na">toLowerCase</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;h2&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Failed to connect to database&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-configuration-properties-classes">Testing Configuration Properties Classes<a class="headerlink" href="#testing-configuration-properties-classes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@ConfigurationPropertiesTest</span>
<span class="kd">class</span> <span class="nc">EmailConfigPropertiesTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">validateConfigProperties</span><span class="p">(</span>
<span class="w">            </span><span class="nd">@ConfigurationProperty</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;app.email&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">properties</span><span class="p">).</span><span class="na">containsEntry</span><span class="p">(</span><span class="s">&quot;host&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;smtp.example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">properties</span><span class="p">).</span><span class="na">containsEntry</span><span class="p">(</span><span class="s">&quot;port&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">587</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">properties</span><span class="p">).</span><span class="na">containsEntry</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;test@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="testing-with-external-configuration">Testing with External Configuration<a class="headerlink" href="#testing-with-external-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@TestPropertySource</span><span class="p">(</span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;classpath:test-application.properties&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ExternalConfigTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">appProperties</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">propertiesFromExternalFileShouldBeLoaded</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">appProperties</span><span class="p">.</span><span class="na">getApi</span><span class="p">().</span><span class="na">getBaseUrl</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;https://test-api.example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">appProperties</span><span class="p">.</span><span class="na">getApi</span><span class="p">().</span><span class="na">getTimeout</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">30</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="test-containers">Test Containers<a class="headerlink" href="#test-containers" title="Permanent link">&para;</a></h2>
<p>Testcontainers is a Java library that provides lightweight, throwaway instances of common databases, Selenium web browsers, or anything else that can run in a Docker container. It's particularly useful for integration testing.</p>
<h3 id="getting-started-with-testcontainers">Getting Started with Testcontainers<a class="headerlink" href="#getting-started-with-testcontainers" title="Permanent link">&para;</a></h3>
<p>First, add the dependencies:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>testcontainers<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>1.17.6<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>1.17.6<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>1.17.6<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="testing-with-a-postgresql-container">Testing with a PostgreSQL Container<a class="headerlink" href="#testing-with-a-postgresql-container" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@Testcontainers</span>
<span class="kd">class</span> <span class="nc">PostgresIntegrationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:14.5&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">postgresProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldSaveAndRetrieveUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testcontainer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;test@container.com&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// When</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Then</span>
<span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;testcontainer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">found</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;test@container.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="multiple-containers-and-container-networks">Multiple Containers and Container Networks<a class="headerlink" href="#multiple-containers-and-container-networks" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="nd">@Testcontainers</span>
<span class="kd">class</span> <span class="nc">MultiContainerTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">Network</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Network</span><span class="p">.</span><span class="na">newNetwork</span><span class="p">();</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:14.5&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withNetwork</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withNetworkAliases</span><span class="p">(</span><span class="s">&quot;postgres&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Container</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">GenericContainer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">redis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GenericContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;redis:6.2&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withNetwork</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withNetworkAliases</span><span class="p">(</span><span class="s">&quot;redis&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">withExposedPorts</span><span class="p">(</span><span class="mi">6379</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@DynamicPropertySource</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configureProperties</span><span class="p">(</span><span class="n">DynamicPropertyRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getJdbcUrl</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.username&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getUsername</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.datasource.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">postgres</span><span class="p">::</span><span class="n">getPassword</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.redis.host&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">redis</span><span class="p">::</span><span class="n">getHost</span><span class="p">);</span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;spring.redis.port&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">redis</span><span class="p">::</span><span class="n">getFirstMappedPort</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserRepository</span><span class="w"> </span><span class="n">userRepository</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldInteractWithMultipleContainers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Test PostgreSQL</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;multicontainer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;multicontainer&quot;</span><span class="p">)).</span><span class="na">isPresent</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// Test Redis</span>
<span class="w">        </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;testkey&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;testvalue&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;testkey&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">value</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;testvalue&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="custom-container-classes">Custom Container Classes<a class="headerlink" href="#custom-container-classes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CustomPostgreSQLContainer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PostgreSQLContainer</span><span class="o">&lt;</span><span class="n">CustomPostgreSQLContainer</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">IMAGE_VERSION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;postgres:14.5&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">CustomPostgreSQLContainer</span><span class="w"> </span><span class="n">container</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">CustomPostgreSQLContainer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">IMAGE_VERSION</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">CustomPostgreSQLContainer</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">container</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CustomPostgreSQLContainer</span><span class="p">()</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">withInitScript</span><span class="p">(</span><span class="s">&quot;init.sql&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">container</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">start</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;DB_URL&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="p">.</span><span class="na">getJdbcUrl</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;DB_USERNAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="p">.</span><span class="na">getUsername</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;DB_PASSWORD&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="p">.</span><span class="na">getPassword</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">stop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// do nothing, JVM handles shutdown</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="performance-and-load-testing">Performance and Load Testing<a class="headerlink" href="#performance-and-load-testing" title="Permanent link">&para;</a></h2>
<p>Performance testing ensures your application meets its performance criteria under various conditions.</p>
<h3 id="jmeter-integration">JMeter Integration<a class="headerlink" href="#jmeter-integration" title="Permanent link">&para;</a></h3>
<p>JMeter is a popular tool for load testing. You can integrate it with Spring Boot:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.apache.jmeter<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>ApacheJMeter_core<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>5.5<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.apache.jmeter<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>ApacheJMeter_http<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>5.5<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="basic-performance-testing">Basic Performance Testing<a class="headerlink" href="#basic-performance-testing" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">PerformanceTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@LocalServerPort</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TestRestTemplate</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">endpointResponseTimeShouldBeLessThan500ms</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Warm up</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">restTemplate</span><span class="p">.</span><span class="na">getForEntity</span><span class="p">(</span><span class="s">&quot;/api/products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Test</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<span class="w">        </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">restTemplate</span><span class="p">.</span><span class="na">getForEntity</span><span class="p">(</span><span class="s">&quot;/api/products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">endTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getStatusCode</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">OK</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">duration</span><span class="p">).</span><span class="na">isLessThan</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="load-testing-with-concurrent-requests">Load Testing with Concurrent Requests<a class="headerlink" href="#load-testing-with-concurrent-requests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">LoadTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@LocalServerPort</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">shouldHandleConcurrentRequests</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://localhost:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;/api/products&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">numThreads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">requestsPerThread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>

<span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Executors</span><span class="p">.</span><span class="na">newFixedThreadPool</span><span class="p">(</span><span class="n">numThreads</span><span class="p">);</span>
<span class="w">        </span><span class="n">CountDownLatch</span><span class="w"> </span><span class="n">latch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CountDownLatch</span><span class="p">(</span><span class="n">numThreads</span><span class="p">);</span>
<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">successCounter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">failCounter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numThreads</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">executor</span><span class="p">.</span><span class="na">submit</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">requestsPerThread</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="n">HttpURLConnection</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpURLConnection</span><span class="p">)</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="na">openConnection</span><span class="p">();</span>
<span class="w">                            </span><span class="n">connection</span><span class="p">.</span><span class="na">setRequestMethod</span><span class="p">(</span><span class="s">&quot;GET&quot;</span><span class="p">);</span>
<span class="w">                            </span><span class="kt">int</span><span class="w"> </span><span class="n">responseCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="na">getResponseCode</span><span class="p">();</span>

<span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">responseCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">successCounter</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">failCounter</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                            </span><span class="p">}</span>

<span class="w">                            </span><span class="n">connection</span><span class="p">.</span><span class="na">disconnect</span><span class="p">();</span>
<span class="w">                        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="n">failCounter</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">();</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latch</span><span class="p">.</span><span class="na">countDown</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Wait for all threads to finish</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">completed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">latch</span><span class="p">.</span><span class="na">await</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">MINUTES</span><span class="p">);</span>

<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">completed</span><span class="p">).</span><span class="na">isTrue</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">successCounter</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">numThreads</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">requestsPerThread</span><span class="p">);</span>
<span class="w">        </span><span class="n">assertThat</span><span class="p">(</span><span class="n">failCounter</span><span class="p">.</span><span class="na">get</span><span class="p">()).</span><span class="na">isZero</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="gatling-for-load-testing">Gatling for Load Testing<a class="headerlink" href="#gatling-for-load-testing" title="Permanent link">&para;</a></h3>
<p>Gatling is a more sophisticated load testing tool:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProductsSimulation</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Simulation</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">httpProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">http</span>
<span class="w">    </span><span class="p">.</span><span class="n">baseUrl</span><span class="p">(</span><span class="s">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">acceptHeader</span><span class="p">(</span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">userAgentHeader</span><span class="p">(</span><span class="s">&quot;Gatling Load Test&quot;</span><span class="p">)</span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">scn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scenario</span><span class="p">(</span><span class="s">&quot;Products Load Test&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">exec</span><span class="p">(</span><span class="n">http</span><span class="p">(</span><span class="s">&quot;Get All Products&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/products&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">is</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>
<span class="w">    </span><span class="p">.</span><span class="n">pause</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">exec</span><span class="p">(</span><span class="n">http</span><span class="p">(</span><span class="s">&quot;Get Single Product&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/products/1&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">is</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>
<span class="w">    </span><span class="p">.</span><span class="n">pause</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">exec</span><span class="p">(</span><span class="n">http</span><span class="p">(</span><span class="s">&quot;Search Products&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/api/products/search?query=phone&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">is</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>

<span class="w">  </span><span class="n">setUp</span><span class="p">(</span>
<span class="w">    </span><span class="n">scn</span><span class="p">.</span><span class="n">inject</span><span class="p">(</span>
<span class="w">      </span><span class="n">rampUsers</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="n">during</span><span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="n">seconds</span><span class="p">),</span>
<span class="w">      </span><span class="n">constantUsersPerSec</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="n">during</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="n">minute</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">).</span><span class="n">protocols</span><span class="p">(</span><span class="n">httpProtocol</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">assertions</span><span class="p">(</span>
<span class="w">      </span><span class="n">global</span><span class="p">.</span><span class="n">responseTime</span><span class="p">.</span><span class="n">max</span><span class="p">.</span><span class="n">lt</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
<span class="w">      </span><span class="n">global</span><span class="p">.</span><span class="n">successfulRequests</span><span class="p">.</span><span class="n">percent</span><span class="p">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">95</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="test-driven-development">Test-Driven Development<a class="headerlink" href="#test-driven-development" title="Permanent link">&para;</a></h2>
<p>Test-Driven Development (TDD) is a software development approach where tests are written before the actual implementation code.</p>
<h3 id="the-tdd-cycle">The TDD Cycle<a class="headerlink" href="#the-tdd-cycle" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Red</strong>: Write a failing test.</li>
<li><strong>Green</strong>: Implement the minimum code needed to pass the test.</li>
<li><strong>Refactor</strong>: Improve the code while keeping the tests passing.</li>
</ol>
<h3 id="example-tdd-workflow">Example TDD Workflow<a class="headerlink" href="#example-tdd-workflow" title="Permanent link">&para;</a></h3>
<p>Let's implement a calculator service using TDD:</p>
<ol>
<li><strong>Red Phase</strong> - Write a failing test:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">addShouldReturnSumOfTwoNumbers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">CalculatorService</span><span class="w"> </span><span class="n">calculator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CalculatorServiceImpl</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>Green Phase</strong> - Implement the minimal code to pass:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CalculatorServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CalculatorService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Other methods not implemented yet</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>Refactor Phase</strong> - Improve code quality:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CalculatorServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CalculatorService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Maybe refactor common validation or logging here</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>Continue the Cycle</strong> - Add more tests for new functionality:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">subtractShouldReturnDifferenceOfTwoNumbers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">CalculatorService</span><span class="w"> </span><span class="n">calculator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CalculatorServiceImpl</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="na">subtract</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>Red-Green-Refactor</strong> again:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CalculatorServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CalculatorService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">subtract</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="benefits-of-tdd">Benefits of TDD<a class="headerlink" href="#benefits-of-tdd" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Focused Development</strong>: You only write code that's needed to pass tests.</li>
<li><strong>High Test Coverage</strong>: Tests are guaranteed for all features.</li>
<li><strong>Better Design</strong>: TDD encourages modular, loosely coupled code.</li>
<li><strong>Documentation</strong>: Tests serve as documentation for how code should behave.</li>
<li><strong>Confidence</strong>: Changing code is safer with a test suite to catch regressions.</li>
</ul>
<h2 id="testing-best-practices">Testing Best Practices<a class="headerlink" href="#testing-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="structure-tests-according-to-aaa-pattern">Structure Tests According to AAA Pattern<a class="headerlink" href="#structure-tests-according-to-aaa-pattern" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Arrange</strong>: Set up test prerequisites.</li>
<li><strong>Act</strong>: Perform the action being tested.</li>
<li><strong>Assert</strong>: Verify the expected outcome.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">userRegistrationShouldCreateNewUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange</span>
<span class="w">    </span><span class="n">UserRegistrationRequest</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserRegistrationRequest</span><span class="p">();</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;newuser@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="n">UserResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">registerUser</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Assert</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getUsername</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">assertThat</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">)).</span><span class="na">isPresent</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="use-meaningful-test-names">Use Meaningful Test Names<a class="headerlink" href="#use-meaningful-test-names" title="Permanent link">&para;</a></h3>
<p>Test names should clearly describe what's being tested and expected behavior:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldReturnNotFoundWhenUserDoesNotExist</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionWhenEmailIsInvalid</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldSendConfirmationEmailWhenOrderIsPlaced</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="avoid-test-interdependencies">Avoid Test Interdependencies<a class="headerlink" href="#avoid-test-interdependencies" title="Permanent link">&para;</a></h3>
<p>Each test should be independent and not rely on other tests:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// BAD - Tests depend on each other</span>
<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">test1_createUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// Creates a user for test2</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">test2_updateUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// Uses the user from test1</span>

<span class="c1">// GOOD - Each test is independent</span>
<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldCreateUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange all prerequisites here</span>
<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="c1">// Assert</span>
<span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldUpdateUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Arrange all prerequisites here, including creating a user</span>
<span class="w">    </span><span class="c1">// Act</span>
<span class="w">    </span><span class="c1">// Assert</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="use-appropriate-assertion-libraries">Use Appropriate Assertion Libraries<a class="headerlink" href="#use-appropriate-assertion-libraries" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// JUnit assertions</span>
<span class="n">assertEquals</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">actual</span><span class="p">);</span>
<span class="n">assertTrue</span><span class="p">(</span><span class="n">condition</span><span class="p">);</span>

<span class="c1">// AssertJ fluent assertions (preferred)</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">actual</span><span class="p">).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">expected</span><span class="p">);</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">collection</span><span class="p">).</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;item1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;item2&quot;</span><span class="p">);</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">exception</span><span class="p">).</span><span class="na">isInstanceOf</span><span class="p">(</span><span class="n">IllegalArgumentException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">hasMessageContaining</span><span class="p">(</span><span class="s">&quot;Invalid input&quot;</span><span class="p">);</span>
</code></pre></div>
<h3 id="test-edge-cases-and-error-paths">Test Edge Cases and Error Paths<a class="headerlink" href="#test-edge-cases-and-error-paths" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldHandleEmptyInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldHandleMaximumSizeInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldThrowExceptionForInvalidData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">shouldHandleNetworkTimeouts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="clean-up-after-tests">Clean Up After Tests<a class="headerlink" href="#clean-up-after-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@AfterEach</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Clean up database</span>
<span class="w">    </span><span class="n">userRepository</span><span class="p">.</span><span class="na">deleteAll</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Reset any static data</span>
<span class="w">    </span><span class="n">TestData</span><span class="p">.</span><span class="na">reset</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Clear security context</span>
<span class="w">    </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">clearContext</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="use-test-fixtures-and-factories">Use Test Fixtures and Factories<a class="headerlink" href="#use-test-fixtures-and-factories" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserTestFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">createValidUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">());</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;test@example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setCreatedAt</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setActive</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">createAdminUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createValidUser</span><span class="p">();</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;adminuser&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="s">&quot;admin@example.com&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="na">setRole</span><span class="p">(</span><span class="n">Role</span><span class="p">.</span><span class="na">ADMIN</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">user</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="use-test-tags-for-categorization">Use Test Tags for Categorization<a class="headerlink" href="#use-test-tags-for-categorization" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Tag</span><span class="p">(</span><span class="s">&quot;unit&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserServiceTests</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Tag</span><span class="p">(</span><span class="s">&quot;integration&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">UserRepositoryTests</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="nd">@Tag</span><span class="p">(</span><span class="s">&quot;slow&quot;</span><span class="p">)</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="s">&quot;database&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">LargeDatasetTests</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="maintain-test-quality">Maintain Test Quality<a class="headerlink" href="#maintain-test-quality" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Keep Tests Fast</strong>: Slow tests discourage frequent testing.</li>
<li><strong>Keep Tests Simple</strong>: Complex test logic is prone to bugs.</li>
<li><strong>Review Test Code</strong>: Test code should meet the same quality standards as production code.</li>
<li><strong>Refactor Tests</strong>: Continuously improve test code to avoid test maintenance burden.</li>
<li><strong>Prioritize Test Reliability</strong>: Flaky tests erode confidence in the test suite.</li>
</ul>
<h3 id="continuous-integration">Continuous Integration<a class="headerlink" href="#continuous-integration" title="Permanent link">&para;</a></h3>
<ul>
<li>Run tests automatically on every push.</li>
<li>Include test coverage reports.</li>
<li>Fail builds when tests fail.</li>
<li>Monitor test performance over time.</li>
</ul>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Testing is a critical part of Spring Boot application development. With Spring Boot's comprehensive testing support, you can:</p>
<ul>
<li>Write effective unit tests for isolated components.</li>
<li>Create integration tests to verify component interactions.</li>
<li>Test specific layers using test slices.</li>
<li>Mock dependencies for controlled testing.</li>
<li>Verify security constraints.</li>
<li>Test with realistic environments using test containers.</li>
<li>Measure and optimize performance.</li>
<li>Apply test-driven development principles.</li>
</ul>
<p>Following best practices ensures your tests remain valuable, maintainable, and effective at catching bugs before they reach production.</p>
<h2 id="further-reading">Further Reading<a class="headerlink" href="#further-reading" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing">Spring Boot Testing Documentation</a></li>
<li><a href="https://junit.org/junit5/docs/current/user-guide/">JUnit 5 User Guide</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html">Mockito Documentation</a></li>
<li><a href="https://www.testcontainers.org/">Testcontainers Documentation</a></li>
<li><a href="https://assertj.github.io/doc/">AssertJ Documentation</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Muhammed Shemeel
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/mshemeel" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/mshemeel" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>